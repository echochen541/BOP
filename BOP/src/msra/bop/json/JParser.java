package msra.bop.json;

import com.alibaba.fastjson.JSON;

import java.util.List;

/**
 * Created by liuchun on 2016/5/7.
 */
public class JParser {

    public static List<PaperEntity> getPaperEntity(String json){
        // parser json with fastjson lib
        EntityWrapper wrapper = JSON.parseObject(json, EntityWrapper.class);

        return wrapper.getEntities();
    }



    // test data
    static String rsp = "{\n" +
            "\"expr\" : \"Y>=2016\",\n" +
            "\"entities\" : \n" +
            "[{ \"logprob\":-14.955, \"Id\":2286825849, \"RId\":[274441323, 577252877], \"AA\":[{\"AuId\":2284873255}] }, \n" +
            "{ \"logprob\":-16.871, \"Id\":2292853533, \"RId\":[], \"AA\":[{\"AuId\":2291332977}] }, \n" +
            "{ \"logprob\":-16.894, \"Id\":2179036997, \"RId\":[2154556219, 2152770371, 342758150, 2145111808, 1987134040, 2038752330, 2136889078, 2036492728, 2149941205, 2041039346, 1979421702, 2168232712, 1971935800, 1984293546, 2090678979, 2160476975, 2125466501, 2058176372, 1991392887], \"AA\":[{\"AuId\":2131087226,\"AfId\":101479585}, {\"AuId\":2268927867,\"AfId\":52158045}, {\"AuId\":2129379104,\"AfId\":79510175}, {\"AuId\":2249044740,\"AfId\":101479585}, {\"AuId\":2130984486,\"AfId\":76130692}, {\"AuId\":2155396937,\"AfId\":36234482}, {\"AuId\":2132030956,\"AfId\":1334968043}, {\"AuId\":2149475920,\"AfId\":157773358}, {\"AuId\":2246322438,\"AfId\":52158045}, {\"AuId\":2105633301,\"AfId\":101479585}, {\"AuId\":2246297811,\"AfId\":101479585}, {\"AuId\":2145257251,\"AfId\":76130692}, {\"AuId\":2225779155,\"AfId\":52158045}, {\"AuId\":2163912729,\"AfId\":101479585}, {\"AuId\":2145270204,\"AfId\":101479585}, {\"AuId\":2147008297,\"AfId\":101479585}, {\"AuId\":2116404679,\"AfId\":76130692}, {\"AuId\":2246270644,\"AfId\":101479585}, {\"AuId\":2289729079,\"AfId\":101479585}, {\"AuId\":2154505976,\"AfId\":52158045}], \"J\":{\"JId\":23772524} }, \n" +
            "{ \"logprob\":-16.935, \"Id\":1519298482, \"RId\":[], \"AA\":[{\"AuId\":2303137688}, {\"AuId\":512662712}, {\"AuId\":2319959557}, {\"AuId\":2319696315}, {\"AuId\":2169594119}] }, \n" +
            "{ \"logprob\":-17.076, \"Id\":2152984210, \"RId\":[2175466100, 2176368202, 2176407413, 2038742869, 2162070159, 2179413805, 2172819965, 85397092, 2175261265, 47355813, 2179792739, 2167255107, 2172612125, 2218494222, 1969981719, 2046678808, 2241736509, 2175400375, 1993512681, 1968571511, 2142253982, 1980950305, 2070016090, 2176659470, 2179984773, 2115552240, 1487637136, 2176905567, 2099533604, 1964212937, 2178477799, 2121685656, 1992671960, 1976820005, 2173454648, 2149205139, 2012910700, 2121734782, 2105187327, 1548588257, 1551875884, 2137341626, 2063314304, 2170899300, 2038197566, 2178661534, 2077783685, 2065888684, 2154983283], \"AA\":[{\"AuId\":2092357294}, {\"AuId\":2062355721}, {\"AuId\":423656827}, {\"AuId\":2305940053}, {\"AuId\":2161576553}, {\"AuId\":2244066162}, {\"AuId\":2310599388}] }, \n" +
            "{ \"logprob\":-17.123, \"Id\":2333101384, \"RId\":[2326415120, 2333560605, 2327732136], \"AA\":[{\"AuId\":1992406974}, {\"AuId\":2119854248}, {\"AuId\":2321114140}, {\"AuId\":2315992430}, {\"AuId\":2090336539}, {\"AuId\":2110389516}, {\"AuId\":2137561139}, {\"AuId\":2317133495}, {\"AuId\":2321079560}], \"J\":{\"JId\":100299040} }, \n" +
            "{ \"logprob\":-17.462, \"Id\":2196906371, \"RId\":[], \"AA\":[{\"AuId\":20044890}, {\"AuId\":2168721218}, {\"AuId\":2160223120}, {\"AuId\":1992270684}, {\"AuId\":2005352543}, {\"AuId\":2046859330}, {\"AuId\":2277451764}, {\"AuId\":2292107369}, {\"AuId\":2330851866}, {\"AuId\":2307110141}, {\"AuId\":2107771829}, {\"AuId\":2074002257}, {\"AuId\":1772048951}, {\"AuId\":2210847146}, {\"AuId\":2141707827}, {\"AuId\":2307294189}, {\"AuId\":2168694049}, {\"AuId\":2303500989}, {\"AuId\":2108767686}, {\"AuId\":2117883589}, {\"AuId\":2021019090}, {\"AuId\":2091543069}, {\"AuId\":1610056870}, {\"AuId\":2304347579}, {\"AuId\":2067622581}, {\"AuId\":43564830}, {\"AuId\":2123725838}, {\"AuId\":1811719087}, {\"AuId\":2118981871}, {\"AuId\":2010758213}, {\"AuId\":2301414760}, {\"AuId\":2140680963}, {\"AuId\":2098047027}, {\"AuId\":196700306}, {\"AuId\":2311832119}, {\"AuId\":2109306906}, {\"AuId\":2297677509}, {\"AuId\":2037268001}, {\"AuId\":2168254275}, {\"AuId\":2098709335}, {\"AuId\":2031989165}, {\"AuId\":2096743041}], \"J\":{\"JId\":116251202} }, \n" +
            "{ \"logprob\":-17.578, \"Id\":2326415120, \"RId\":[2333101384, 2333560605], \"AA\":[{\"AuId\":2324471334}, {\"AuId\":2333871491}], \"J\":{\"JId\":100299040} }, \n" +
            "{ \"logprob\":-17.717, \"Id\":2333560605, \"RId\":[2333101384, 2326415120, 2103306954], \"AA\":[{\"AuId\":2192539030}, {\"AuId\":2243622097}, {\"AuId\":2327520285}, {\"AuId\":2248572167}, {\"AuId\":2327605036}, {\"AuId\":2313865873}, {\"AuId\":2001666749}, {\"AuId\":2315148087}], \"J\":{\"JId\":100299040} }, \n" +
            "{ \"logprob\":-17.745, \"Id\":2105583547, \"RId\":[], \"AA\":[{\"AuId\":2150816352}, {\"AuId\":1861081988}, {\"AuId\":2172119142}, {\"AuId\":2097375169}] }]\n" +
            "}\n";

    public static void main(String[] args) {
        List<PaperEntity> entities = JParser.getPaperEntity(rsp);
        for(PaperEntity entity : entities){
            System.out.print("Id: " + entity.getId() + "\n");
        }
    }
}
